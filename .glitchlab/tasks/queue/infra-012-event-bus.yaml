id: infra-012-event-bus
objective: "Implement a lightweight, agnostic Event Bus to decouple core system actions from external logging/cryptography."
steps:
  - "Modify the existing file: 'glitchlab/event_bus.py'."
  - "Define a 'GlitchEvent' Pydantic model containing: event_id (uuid4), timestamp (isoformat), event_type (str), agent_name (str), and payload (dict)."
  - "Modify the 'EventBus' class with a 'subscribe(callback)' method and an 'emit(event_type, agent_name, payload)' method."
  - "When 'emit' is called, it should construct a GlitchEvent and pass it to all subscribed callbacks."
  - "Instantiate a global or accessible singleton instance of the EventBus so it can be imported across the project."
  - "Modify the existing file 'tests/test_event_bus.py' to add unit tests."
constraints:
  - "Do not modify any existing router or tool code yet; this is purely foundational."
  - "Do not add any cryptography or Zephyr-specific logic. Keep it purely structural."
mode: evolution
risk: low