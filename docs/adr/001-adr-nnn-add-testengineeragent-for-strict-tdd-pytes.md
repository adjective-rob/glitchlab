# ADR-NNN: Add TestEngineerAgent for strict TDD pytest generation

**Status:** accepted
**Date:** 2026-02-25

## Context

A new agent was required to enforce Test-Driven Development discipline by generating pytest file plans in strict JSON output, independent from internal implementation details.

## Decision

Implemented TestEngineerAgent in glitchlab/agents/test_engineer.py as a subclass of BaseAgent with role 'test_engineer'. It uses a system prompt that mandates strict TDD enforcement and JSON-only output describing pytest files to be created or modified. The agent consumes a technical plan from the AgentContext and outputs a JSON response listing the pytest files, explicitly guiding tests to validate strict JSON structures, Pydantic validations, and HTTP status codes, while ignoring internal implementation details. Also added documentation entry and references.

## Consequences

Promotes uniform test-generation patterns and verifiable test structure. Introduces a rigid contract for test file generation and validation. May require future updates to prompt to cover edge cases and to maintain compatibility with evolving pytest conventions. Provides groundwork for CI to parse and execute newly generated tests.

## Alternatives Considered

- Manual test file creation by developers without an agent, preserving existing workflow but lacking automation.
- Reuse an existing agent with generic documentation rather than introducing a dedicated TestEngineerAgent with a strict JSON contract.

---
*Generated by GLITCHLAB / Archivist Nova*
